<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang="page_title">Monitoring Karimun Jawa</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body>
<nav class="navbar is-fixed-top has-background-info-dark is-spaced" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="#">
      <img src="assets/algoproject.png" alt="site logo" style="max-height: 100px" class="py-2 px-2">
    </a>

    <a role="button" class="navbar-burger" id="burger" aria-label="menu" aria-expanded="false" data-target="nav-links">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div class="navbar-item pl-7">
    <div>
      <span class="title is-2 has-text-light">A q u a W a t c h</span><br>
      <span class="subtitle is-4 has-text-light" data-lang="nav_subtitle">Sistem Pemantauan Kualitas Air Laut Secara Real-Time</span>
    </div>
  </div>

  <div id="nav-links" class="navbar-menu">
    <div class="navbar-end pr-7">
      <a href="#beranda" class="navbar-item is-size-6 has-text-weight-bold" data-lang="nav_home">Beranda</a>
      <a href="#monitoring" class="navbar-item is-size-6 has-text-weight-bold" data-lang="nav_monitoring">Monitoring</a>
      
  <div class="navbar-item">
        <div class="buttons has-addons">
          <button id="lang-btn-id" class="button is-small is-info">Indonesia</button>
          <button id="lang-btn-en" class="button is-small is-light">English</button>
        </div>
      </div>
    </div>
  </div>  
</nav>

<script>
  // Skrip burger menu (bawaan)
  document.addEventListener('DOMContentLoaded', () => {
    const burger = document.getElementById('burger');
    const menu = document.getElementById('nav-links');

    burger.addEventListener('click', () => {
      burger.classList.toggle('is-active');
      menu.classList.toggle('is-active');
    });
  });
</script>

<section  id="beranda" class="section" style="padding-top: 10rem; padding-bottom: 1rem;">
  <div class="is-flex is-justify-content-flex-end is-align-items-center" style="gap: 10px;">
    <figure class="image is-48x48">
      <img src="assets/dikti.png" alt="dikti">
    </figure>
    <figure class="image is-48x48">
      <img src="assets/tnkj.png" alt="tnkj">
    </figure>
    <figure class="image is-32x32">
      <img src="assets/undip.png" alt="undip">
    </figure>
    <figure class="image is-64x64">
      <img src="assets/algopolosan.png" alt="algopolosan">
    </figure>
    <figure class="image is-32x32">
      <img src="assets/algoproject.png" alt="algoproject">
    </figure>
  </div>
</section>

<section class="section" style="padding-top: 1rem;">
  <div class="container">
    <div class="columns is-vcentered is-multiline">
      <div class="column is-12-mobile is-6-desktop">
        <div class="box" style="padding: 0;">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d1940.8645404965418!2d110.42850275694828!3d-5.835052210641873!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zNcKwNTAnMDUuMCJTIDExMMKwMjUnNDMuMCJF!5e1!3m2!1sid!2sid!4v1762939235347!5m2!1sid!2sid"
            width="100%"
            height="400"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
      <div class="column is-12-mobile is-6-desktop">
        <div class="content" style="padding: 20px;">
          <h1 class="title is-size-3-mobile is-size-2-desktop has-text-black-bis" data-lang="about_title">ABOUT US</h1>
          <p data-lang="about_desc">
            Sistem Pemantauan Kualitas Air Laut Berbasis IOT sebagai upaya mitigasi coral bleaching di Kepulauan Karimunjawa, Jepara.
          </p>
          <br />
          <p><em>‚ÄúCoral Needs Care, We Build Solutions!‚Äù</em></p>
        </div>
      </div>
    </div>
  </div>
</section>
    <main>
        <section  id="monitoring" class="current-values" id="monitoring" class="section">
            <div class="card">
                <h2 data-lang="current_data_title">üìä Data Terkini</h2>
                 <div class="column" style="display: flex; align-items: center; gap: 15px;">
                        <figure class="image is-64x64" style="margin: 0;">
                            <img src="assets/realtime.png" alt="Logo" style="max-height: 60px;">
                        </figure>
                <div>
                        <p id="realtime-clock" data-lang="loading_time">Loading time...</p>
                        <p class="has-text-weight-bold"><em>Realtime Sensors</em></p>
                </div>
            </div>
</div>
            </div>
        </section>

    <section class="charts section">
  <div class="card p-5">
    <h2 class="title is-5 mb-4 has-text-centered" data-lang="chart_title_elevation">
      üìà Elevasi (Pasut) - 24 Jam Terakhir
    </h2>

    <div class="columns is-vcentered is-multiline">
      <div class="column is-12-mobile is-12-tablet is-4-desktop has-text-centered mb-5 mb-0-desktop">
        <iframe 
          width="100%" 
          height="250" 
          style="border: 1px solid #cccccc; border-radius: 6px; padding: 2px;" 
          src="https://thingspeak.com/channels/3059427/widgets/1137112">
        </iframe>
      </div>
      <div class="column is-12-mobile is-12-tablet is-8-desktop">
        <div class="is-flex is-justify-content-center is-justify-content-flex-end-desktop">
          <iframe 
            width="100%" 
            height="250" 
            style="border: 1px solid #cccccc; border-radius: 6px; padding: 2px;" 
            src="https://thingspeak.com/channels/3059427/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
          </iframe>
        </div>
      </div>

    </div>
  </div>
</section>

<section class="charts section">
  <div class="card p-5">
    <h2 class="title is-5 mb-4 has-text-centered" data-lang="chart_title_temp">
      üå°Ô∏è Temperatur - 24 Jam Terakhir
    </h2>

    <div class="columns is-vcentered is-multiline">
      <div class="column is-12-mobile is-12-tablet is-4-desktop has-text-centered mb-5 mb-0-desktop">
        <iframe 
          width="100%" 
          height="250" 
          style="border: 1px solid #cccccc; border-radius: 6px; padding: 2px;" 
          src="https://thingspeak.com/channels/3072961/widgets/1137106">
        </iframe>
      </div>
      <div class="column is-12-mobile is-12-tablet is-8-desktop">
        <div class="is-flex is-justify-content-center is-justify-content-flex-end-desktop">
          <iframe 
            width="100%" 
            height="250" 
            style="border: 1px solid #cccccc; border-radius: 6px; padding: 2px;" 
            src="https://thingspeak.com/channels/3072961/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15">
          </iframe>
        </div>
      </div>
    </div>
  </div>
</section>


</main>

  <footer class="footer has-background-info-dark">
    <div class="content has-text-centered">
      <p>¬©Copyright 2025 Algomarine</p>
    </div>
  </footer>


 <script>
      document.addEventListener('DOMContentLoaded', () => {
        // --- 1. Definisi Terjemahan ---
        const translations = {
          'id': {
            page_title: 'Monitoring Karimun Jawa',
            nav_subtitle: 'Sistem Pemantauan Kualitas Air Laut Secara Real-Time',
            nav_home: 'Beranda',
            nav_monitoring: 'Monitoring',
            nav_lang_switch: 'English', 
            about_title: 'ABOUT US',
            about_desc: 'Sistem Pemantauan Kualitas Air Laut Berbasis IOT sebagai upaya mitigasi coral bleaching di Kepulauan Karimunjawa, Jepara.',
            current_data_title: 'üìä Data Terkini',
            loading_time: 'Memuat waktu...',
            days: ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'],
            chart_title_elevation: 'üìà Elevasi (Pasut) - 24 Jam Terakhir',
            chart_title_temp: 'üå°Ô∏è Temperatur - 24 Jam Terakhir',
            chart_title_salinity: 'üßÇ Salinitas - 24 Jam Terakhir',
            chart_title_tds: 'üíß TDS (Kekeruhan) - 24 Jam Terakhir',
          },
          'en': {
            page_title: 'Karimun Jawa Monitoring',
            nav_subtitle: 'Real-Time Seawater Quality Monitoring System',
            nav_home: 'Home',
            nav_monitoring: 'Monitoring',
            nav_lang_switch: 'Bahasa Indonesia', 
            about_title: 'ABOUT US',
            about_desc: 'An IoT-Based Seawater Quality Monitoring System as a coral bleaching mitigation effort in the Karimunjawa Islands, Jepara.',
            current_data_title: 'üìä Current Data',
            loading_time: 'Loading time...',
            days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
            chart_title_elevation: 'üìà Elevation (Tide) - Last 24 Hours',
            chart_title_temp: 'üå°Ô∏è Temperature - Last 24 Hours',
            chart_title_salinity: 'üßÇ Salinity - Last 24 Hours',
            chart_title_tds: 'üíß TDS (Turbidity) - Last 24 Hours',
          }
        };

        // --- 2. Variabel & Elemen ---
        let currentLang = 'id'; // Bahasa default
        
        // --- AMBIL TOMBOL BARU ---
        const btnId = document.getElementById('lang-btn-id');
        const btnEn = document.getElementById('lang-btn-en');
        const clockElement = document.getElementById('realtime-clock');
        
        // --- 3. Fungsi Jam (Tidak berubah) ---
        function updateClock() {
          const now = new Date();
          const days = translations[currentLang].days;
          const day = days[now.getDay()];
          
          const date = now.getDate().toString().padStart(2, '0');
          const month = (now.getMonth() + 1).toString().padStart(2, '0');
          const year = now.getFullYear();
          const hours = now.getHours().toString().padStart(2, '0');
          const minutes = now.getMinutes().toString().padStart(2, '0');
          const seconds = now.getSeconds().toString().padStart(2, '0');
          const formatted = `${day}, ${date}-${month}-${year} - ${hours}.${minutes}.${seconds} WIB`;

          if(clockElement) {
              clockElement.textContent = formatted;
          }
        }

        // --- 4. Fungsi Ganti Bahasa ---
        function setLanguage(lang) {
          currentLang = lang;
          document.documentElement.lang = lang; 
          
          const elements = document.querySelectorAll('[data-lang]');
          
          elements.forEach(el => {
            const key = el.dataset.lang;
            if (translations[lang] && translations[lang][key]) {
              if (el.tagName === 'TITLE') {
                document.title = translations[lang][key];
              } else {
                el.textContent = translations[lang][key];
              }
            }
          });

          // --- LOGIKA BARU UNTUK GAYA TOMBOL ---
          if (lang === 'id') {
            btnId.classList.add('is-info');    // Buat tombol ID aktif
            btnId.classList.remove('is-light');
            btnEn.classList.add('is-light');  // Buat tombol EN inaktif
            btnEn.classList.remove('is-info');
          } else { // lang === 'en'
            btnEn.classList.add('is-info');    // Buat tombol EN aktif
            btnEn.classList.remove('is-light');
            btnId.classList.add('is-light');  // Buat tombol ID inaktif
            btnId.classList.remove('is-info');
          }
          // --- AKHIR LOGIKA BARU ---

          updateClock(); // Panggil updateClock untuk me-refresh nama hari
        }

        // --- 5. Event Listener untuk Tombol (DIRUBAH) ---
        if(btnId && btnEn) {
          // Listener untuk tombol Indonesia
          btnId.addEventListener('click', (e) => {
            e.preventDefault();
            setLanguage('id'); // Langsung set ke 'id'
          });

          // Listener untuk tombol English
          btnEn.addEventListener('click', (e) => {
            e.preventDefault();
            setLanguage('en'); // Langsung set ke 'en'
          });
        }

        // --- 6. Inisialisasi ---
        setLanguage(currentLang); 
        setInterval(updateClock, 1000);

      });
    </script>
</body>
</html>